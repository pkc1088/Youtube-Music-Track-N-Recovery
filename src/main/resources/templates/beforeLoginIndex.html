<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>FixMyPlaylist</title>
    <link rel="icon" type="image/x-icon" th:href="@{/images/FixMyPlaylist_120.webp}" />
    <link th:href="@{/css/styles.css}" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
</head>

<body id="page-top">
<nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
    <div class="container px-5">
        <a class="navbar-brand fw-bold" href="#page-top">
            <img th:src="@{/images/FixMyPlaylist_120.webp}" alt="FixMyPlaylist Logo" style="height: 2.2rem; margin-right: 0.7rem;" />
            FixMyPlaylist
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="bi-list"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
                <li class="nav-item"><a class="nav-link me-lg-3" href="#features">Features</a></li>
                <li class="nav-item"><a class="nav-link me-lg-3" href="#howto">How To Use</a></li>
            </ul>
        </div>
    </div>
</nav>
<header class="masthead">
    <div class="container px-5">
        <div class="row gx-5 align-items-center">
            <div class="col-lg-6">
                <div class="mb-5 mb-lg-0 text-center text-lg-start">
                    <h1 class="display-1 lh-1 mb-3">Fix Your Broken <span style="color: red;">YouTube</span> Playlist</h1>
                    <p class="lead fw-normal text-muted mb-5 text-center">Automatically Track & Recover Unavailable Musics</p>
                    <div class="text-center">
                        <a href="/oauth2/authorization/google" class="google-login-btn"
                           onclick="handleGoogleLogin(event, this.href)">
                            <img th:src="@{/images/googleLoginLogo.webp}" alt="Google 로고" class="google-btn-logo">
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="masthead-device-mockup">
                    <div class="device-wrapper">
                        <div class="device" data-device="iPhoneX" data-orientation="portrait" data-color="black">
                            <div class="screen bg-black">
                                <img th:src="@{/images/privateEnv.webp}" style="max-width: 100%; height: 100%; object-fit: contain;" alt="Private Environment" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<aside class="text-center bg-gradient-primary-to-secondary">
    <div class="container px-5">
        <div class="row gx-5 justify-content-center">
            <div class="col-xl-8">
                <div class="h2 fs-1 text-white mb-4">"Any broken tracks in your playlists, like deleted, private, or blocked ones, will be recovered"</div>
            </div>
        </div>
    </div>
</aside>

<section id="features">
    <div class="container px-5">
        <div class="row gx-5 align-items-center">
            <div class="col-lg-8 order-lg-1 mb-5 mb-lg-0">
                <div class="container-fluid px-5">
                    <div class="row gx-5">
                        <div class="col-md-6 mb-5">
                            <div class="text-center">
                                <i class="bi-phone icon-feature text-gradient d-block mb-3"></i>
                                <h3 class="font-alt">Youtube Connection</h3>
                                <p class="text-muted mb-0">After logging in, you can see your playlists.</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-5">
                            <div class="text-center">
                                <i class="bi-gift icon-feature text-gradient d-block mb-3"></i>
                                <h3 class="font-alt">Free Registration</h3>
                                <p class="text-muted mb-0">Register the public playlists that you want to be tracked.</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-5 mb-md-0">
                            <div class="text-center">
                                <i class="bi-camera icon-feature text-gradient d-block mb-3"></i>
                                <h3 class="font-alt">Daily Tracking</h3>
                                <p class="text-muted mb-0">The system will track your playlists every day.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="text-center">
                                <i class="bi-patch-check icon-feature text-gradient d-block mb-3"></i>
                                <h3 class="font-alt">AI Recovery</h3>
                                <p class="text-muted mb-0">If a broken track is detected, our AI will automatically find a replacement.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 order-lg-0">
                <div class="masthead-device-mockup">
                    <div class="device-wrapper">
                        <div class="device" data-device="iPhoneX" data-orientation="portrait" data-color="black">
                            <div class="screen bg-black">
                                <a href="https://www.youtube.com/watch?v=dqOrLUjCFic" target="_blank"
                                   style="display: block; width: 100%; height: 100%; position: relative;">
                                    <img th:src="@{/images/recoveredEnv.webp}" style="width: 100%; height: 100%; object-fit: cover;" alt="Demo Thumbnail" />
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                                                display: flex; flex-direction: column; align-items: center; pointer-events: none;">
                                        <i class="bi bi-play-circle-fill" style="font-size: 3rem; color: rgb(255,0,0); pointer-events: auto;"></i>
                                        <span style="margin-top: 0.5rem; font-weight: 600; color: red; background:
                                                rgba(0,0,0,0.5); padding: 4px 8px; border-radius: 6px; pointer-events: auto; white-space: nowrap;">
                                                Click to Watch Demo
                                            </span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="bg-light">
    <div class="container px-5">
        <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
            <div class="col-12 col-lg-5 ms-auto text-end">
                <h2 class="display-4 lh-1 mb-4">Fully Automated</h2>
                <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                    Register Once, Rest Easy!
                </p>
            </div>
        </div>
    </div>
</section>

<section class="cta" id="howto">
    <div class="cta-content">
        <div class="container px-5 text-white text-start">
            <h2 class="display-1 lh-1 mb-5">How to Use the Service</h2>
            <ul class="list-unstyled fs-4">
                <li class="mb-3">
                    <i class="bi bi-google me-2"></i>
                    Click <strong>Continue with Google</strong> at the top to sign in or sign up.
                </li>
                <li class="mb-3">
                    <i class="bi bi-check2-square me-2"></i>
                    To get started, please <strong>grant the required YouTube permissions</strong>.
                </li>
                <li class="mb-3">
                    <i class="bi bi-exclamation-circle me-2"></i>
                    Do not use a VPN when signing up.
                </li>
                <li class="mb-3">
                    <i class="bi bi-list-task me-2"></i>
                    After signing up, you can register your playlists or check recovery history.
                </li>
            </ul>
        </div>
    </div>
</section>

<footer class="bg-black text-center py-5">
    <div class="container px-5">
        <div class="text-white-50 small">
            <div class="mb-2">&copy; FixMyPlaylist 2025. All Rights Reserved.</div>
            <a th:href="@{/privacy-policy.html}">Privacy</a>
            <span class="mx-1">&middot;</span>
            <a th:href="@{/terms-of-service.html}">Terms</a>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand('copy');
        document.body.removeChild(t);
    }

    function handleGoogleLogin(event, targetUrl) {
        const userAgent = navigator.userAgent.toLowerCase();

        // 인앱 브라우저 탐지 정규식
        const inAppRegex = /kakaotalk|line|inapp|naver|snapchat|wirtschaftswoche|thunderbird|instagram|everytimeapp|whatsapp|electron|wadiz|aliapp|zumapp|iphone(.*)whale|android(.*)whale|kakaostory|band|twitter|daumapps|daumdevice\/mobile|fb_iab|fb4a|fban|fbios|fbss|trill/i;

        const isInApp = inAppRegex.test(userAgent);

        if (!isInApp) {
            return;
        }

        // 인앱이라면 기본 이동 막기
        event.preventDefault();

        // --- [Case 1] 카카오톡  ---
        if (userAgent.indexOf("kakaotalk") > -1) {
            location.href = 'kakaotalk://web/openExternal?url=' + encodeURIComponent(targetUrl);
        }
        // --- [Case 2] 라인 (Line) ---
        else if (userAgent.indexOf("line") > -1) {
            const separator = targetUrl.includes('?') ? '&' : '?';
            location.href = targetUrl + separator + 'openExternalBrowser=1';
        }
        // --- [Case 3] 안드로이드 (기타 모든 인앱) ---
        else if (userAgent.indexOf("android") > -1) {
            // 크롬 강제 실행 (http/https 자동 감지 적용)
            const scheme = targetUrl.startsWith("https:") ? "https" : "http";
            const intentUrl = targetUrl.replace(/^https?:\/\//i, '');
            // 크롬으로 유도
            const href = `intent://${intentUrl}#Intent;scheme=${scheme};package=com.android.chrome;end;`;
            location.href = href;
        }
        // --- [Case 4] 아이폰/아이패드 (기타 인앱 - 인스타, 페북 등) ---
        else if (userAgent.indexOf("iphone") > -1 || userAgent.indexOf("ipad") > -1 || userAgent.indexOf("ipod") > -1) {
            // 아이폰의 인스타/페북은 주소 복사후 수동 이동 유도
            copyToClipboard(targetUrl);
            alert('보안 정책상 인앱 브라우저에서는 구글 로그인이 차단됩니다.\n\n✅ 로그인 주소가 복사되었습니다.\n\nSafari를 열고 주소창에 붙여넣기하여 진행해주세요.');
        }

        else {
            location.href = targetUrl;
        }
    }
</script>
</body>
</html>

